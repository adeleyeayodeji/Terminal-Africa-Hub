<?php

/**
 * Functions and definitions
 *
 * @link https://developer.wordpress.org/themes/basics/theme-functions/
 *
 * @package Terminal Africa Hub
 * @since 1.0.0
 */

// If this file is called directly, abort.
if (!defined('WPINC')) {
    die('Direct access is not allowed');
}

//define constants
define('TERMINAL_THEME_VERSION', time());
define('TERMINAL_THEME_DIR', get_template_directory());
define('TERMINAL_THEME_URI', get_template_directory_uri());
//assets url
define('TERMINAL_THEME_ASSETS_URI', TERMINAL_THEME_URI . '/assets/');
define('TERMINAL_THEME_BUILD_URI', TERMINAL_THEME_URI . '/build/');
//text domain
define('TERMINAL_THEME_TEXT_DOMAIN', 'terminal-africa-hub');
//book shipment url
define('TERMINAL_BOOK_SHIPMENT_URL', 'https://terminal.africa/book-shipment/');
//track shipment url
define('TERMINAL_TRACK_SHIPMENT_URL', 'https://terminal.africa/track-shipment/');

//check if TerminalTheme class exists
if (!class_exists('TerminalTheme')) {
    require_once get_template_directory() . '/includes/terminal-africa-core.php';
    $terminalTheme = new TerminalTheme();
    //add helpers
    require_once get_template_directory() . '/includes/helpers.php';
}

/**
 * On theme deactivation or switch
 * 
 */
add_action('switch_theme', [$terminalTheme, 'deactivate']);



/**
 * Append custom menu items
 * 
 * @param string $items The HTML list content for the menu items.
 * @param object $args An object containing wp_nav_menu() arguments.
 * @return string The HTML list content for the menu items.
 */
function append_custom_menu_items($items, $args)
{
    // Get the menu object
    $menu_object = wp_get_nav_menu_object($args->menu);

    // Check if this is the 'maputo-footer' menu
    if ($menu_object && $menu_object->slug == 'maputo-footer') {
        // Append custom <li> items
        $items .= '<li class="custom-menu-item thub-maputo-social"><a href="' . esc_url(get_theme_mod('facebook_link')) . '"><svg width="11" height="20" viewBox="0 0 11 20" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M2.70458 10.0762V19.7388C2.70458 19.8694 2.82167 20 2.98561 20H6.84978C6.99029 20 7.13081 19.8912 7.13081 19.7388V9.90207H9.91769C10.0582 9.90207 10.1753 9.79325 10.1987 9.66268L10.4329 6.7247C10.4563 6.57236 10.3158 6.44178 10.1519 6.44178H7.10739V4.35256C7.10739 3.85201 7.52893 3.46028 8.06758 3.46028H10.2221C10.3627 3.46028 10.5032 3.35147 10.5032 3.19913V0.261153C10.5032 0.130576 10.3861 0 10.2221 0H6.56875C4.4376 0 2.70458 1.61045 2.70458 3.59086V6.44178H0.784204C0.643689 6.44178 0.503174 6.5506 0.503174 6.70294V9.66268C0.503174 9.79325 0.62027 9.92383 0.784204 9.92383H2.70458V10.0762Z" fill="#F2F2F2"/>
</svg>
</a><a href="' . esc_url(get_theme_mod('twitter_link')) . '"><svg width="21" height="16" viewBox="0 0 21 16" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M20.5032 1.89517C19.7508 2.21825 18.9552 2.43298 18.1407 2.53275C18.9991 2.0313 19.6408 1.23727 19.9443 0.301111C19.1408 0.770306 18.2617 1.10076 17.345 1.27818C16.7828 0.686801 16.0529 0.275629 15.2502 0.0981206C14.4475 -0.0793879 13.6091 -0.0150213 12.8441 0.282851C12.079 0.580724 11.4227 1.09832 10.9604 1.76835C10.4981 2.43838 10.2513 3.22984 10.252 4.03983C10.2488 4.34892 10.2807 4.65739 10.347 4.95952C8.71585 4.88078 7.11994 4.464 5.6636 3.7364C4.20726 3.00881 2.92329 1.98679 1.89563 0.737161C1.36802 1.62518 1.20452 2.67797 1.4385 3.68064C1.67247 4.68331 2.28629 5.56026 3.15466 6.13252C2.50591 6.11526 1.87088 5.94472 1.30307 5.63529V5.67927C1.30414 6.61148 1.63137 7.51487 2.2297 8.23737C2.82802 8.95987 3.6609 9.45737 4.58814 9.64611C4.23736 9.73715 3.87584 9.78186 3.51308 9.77907C3.25261 9.7836 2.99239 9.76047 2.73695 9.71009C3.00195 10.5113 3.51266 11.2119 4.1988 11.7155C4.88493 12.2191 5.71274 12.5009 6.56828 12.5221C5.11695 13.6396 3.32705 14.2458 1.48461 14.2439C1.1566 14.2461 0.828779 14.2275 0.503174 14.1884C2.37801 15.3778 4.56271 16.007 6.79308 15.9999C14.338 15.9999 18.4631 9.84665 18.4631 4.51287C18.4631 4.33433 18.4568 4.16219 18.4481 3.99105C19.2568 3.42123 19.9533 2.71098 20.5032 1.89517Z" fill="#F2F2F2"/>
</svg>
</a><a href="' . esc_url(get_theme_mod('instagram_link')) . '"><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M9.98415 13.3292C9.35868 13.3292 8.74725 13.1339 8.22719 12.768C7.70713 12.4021 7.30179 11.882 7.06243 11.2735C6.82307 10.665 6.76044 9.99548 6.88247 9.34952C7.00449 8.70357 7.30568 8.11022 7.74796 7.64451C8.19024 7.1788 8.75373 6.86165 9.36719 6.73316C9.98065 6.60467 10.6165 6.67062 11.1944 6.92266C11.7722 7.1747 12.2661 7.60151 12.6136 8.14913C12.9611 8.69674 13.1466 9.34056 13.1466 9.99918C13.1466 10.4365 13.0648 10.8695 12.9059 11.2735C12.747 11.6775 12.514 12.0446 12.2203 12.3538C11.9267 12.6631 11.5781 12.9083 11.1944 13.0757C10.8107 13.243 10.3995 13.3292 9.98415 13.3292Z" fill="#F2F2F2"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M19.0031 3.45C19.2739 4.2294 19.4214 5.05029 19.4399 5.88C19.4969 6.94 19.4969 7.28 19.4969 10C19.4969 11.6746 19.4753 12.4471 19.4587 13.0409C19.4483 13.4116 19.4399 13.7126 19.4399 14.12C19.4214 14.9497 19.2739 15.7706 19.0031 16.55C18.764 17.2182 18.3879 17.8226 17.9014 18.32C17.4312 18.8326 16.8563 19.2258 16.2205 19.47C15.4822 19.7638 14.7018 19.9228 13.9127 19.94C12.9061 20 12.5832 20 10 20C7.41688 20 7.09399 20 6.08732 19.94C5.29828 19.9228 4.51782 19.7638 3.77959 19.47C3.14489 19.2234 2.57058 18.8304 2.09865 18.32C1.61186 17.8248 1.2384 17.2196 1.00651 16.55C0.727451 15.7727 0.576499 14.9508 0.560154 14.12C0.503174 13.06 0.503174 12.72 0.503174 10C0.503174 7.28 0.503174 6.94 0.560154 5.88C0.576499 5.04915 0.727451 4.22734 1.00651 3.45C1.2384 2.78044 1.61186 2.17518 2.09865 1.68C2.57058 1.16956 3.14489 0.776648 3.77959 0.529999C4.51782 0.23616 5.29828 0.0772104 6.08732 0.0600004C7.09399 0 7.41688 0 10 0C12.5832 0 12.9061 0 13.9127 0.0600004C14.7018 0.0772104 15.4822 0.23616 16.2205 0.529999C16.8563 0.774176 17.4312 1.16743 17.9014 1.68C18.3857 2.17928 18.7616 2.78313 19.0031 3.45ZM15.0571 3.45898C14.8317 3.45898 14.6114 3.52936 14.424 3.66122C14.2366 3.79308 14.0905 3.98049 14.0042 4.19976C13.918 4.41903 13.8954 4.66031 13.9394 4.89309C13.9834 5.12587 14.0919 5.33969 14.2513 5.50751C14.4106 5.67533 14.6137 5.78962 14.8348 5.83592C15.0558 5.88223 15.285 5.85846 15.4932 5.76764C15.7015 5.67681 15.8794 5.52301 16.0047 5.32567C16.1299 5.12833 16.1967 4.89632 16.1967 4.65898C16.1967 4.34072 16.0767 4.0355 15.8629 3.81045C15.6492 3.58541 15.3594 3.45898 15.0571 3.45898ZM9.98415 4.86918C9.02099 4.87115 8.08 5.1737 7.28007 5.7386C6.48014 6.30349 5.85718 7.10537 5.48989 8.04293C5.12261 8.98049 5.02748 10.0116 5.21654 11.0061C5.40559 12.0006 5.87034 12.9137 6.55206 13.6302C7.23378 14.3466 8.10189 14.8342 9.04668 15.0313C9.99147 15.2285 10.9706 15.1263 11.8602 14.7377C12.7499 14.3491 13.5102 13.6916 14.0451 12.8482C14.58 12.0048 14.8655 11.0134 14.8655 9.99918C14.8668 9.32428 14.7413 8.65578 14.4963 8.03213C14.2514 7.40848 13.8917 6.84199 13.438 6.36523C12.9844 5.88847 12.4457 5.51086 11.8529 5.25411C11.2602 4.99736 10.6251 4.86654 9.98415 4.86918Z" fill="#F2F2F2"/>
</svg>
</a></li>';
        $items .= '<li class="custom-menu-item"><a href="mailto:' . esc_url(get_theme_mod('company_email')) . '">' . esc_html(get_theme_mod('company_email')) . '</a></li>';
        $items .= '<li class="custom-menu-item"><a href="tel:' . esc_url(get_theme_mod('company_phone')) . '">' . esc_html(get_theme_mod('company_phone')) . '</a></li>';
    }
    return $items;
}
add_filter('wp_nav_menu_items', 'append_custom_menu_items', 10, 2);
